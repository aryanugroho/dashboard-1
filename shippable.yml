language: node_js

node_js: 
    - 5.4.0

cache: false

env: 
  global:
    - SLACK_ORG=Ottemo PROJECT=Dashboard
    - secure: B+KCUkySYJbPkFEcsuhCiaYymVphNX6aOkB7yjLYVlwLyZ0AmPv6a3BKOhFZyy15te+4nEQV4bY4Q/n40ceFMEj5FDlXXOw+oP4DMBd2/GS8HUkH8PnOKplH3hOYnob91Kr6tpuDOHJ1gfukAqQSIkQkgJGCwDx6uzYDfOSgxDUTAgp8GqdXnl6arvZzpmuFic5IScWSU0G6novNVdMD21z1KPpgxckurtStOxHWgOc+N0QSQXzE3MpsIyCxhJNVSxizxKoXLaZ7uktAkPmsloyUPfIYj9zni+n7OgxHlrnUl4DJPQmN89TndP2NeQa7nlUgPfhq5N6Hxxx3M6INDw==

install:

# only build/deploy the develop branch
branch:
    only:
        - develop

after_failure:
    - python slack_notifier.py --org $SLACK_ORG --project $PROJECT --token $SLACK_TOKEN

after_success:
    - REMOTE_HOST=kg.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=rk.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=demo.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=mp.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=sb.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=scs.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=gk.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=dl.staging.ottemo.io bash deploy.sh
    - REMOTE_HOST=kkr.staging.ottemo.io bash deploy.sh
    - python slack_notifier.py --org $SLACK_ORG --project $PROJECT --token $SLACK_TOKEN -s

notifications:
    email: false