
<button class="btn btn-default hidden-xs"
    type="button"
    ng-click="addNewOption()">
    Add option
</button>

<div class="visible-xs text-center">
    <button class="btn btn-default"
        type="button"
        ng-click="addNewOption()">
        Add option
    </button>
</div>

<br /><br />

<div class="well" ng-repeat="option in optionsData | getOrdered">
    <button class="btn btn-sm btn-warning pull-right"
        type="button"
        ng-click="removeOption(option.label)">
        <i class="fa fa-remove"></i> Delete Option
    </button>

    <legend>Option: {{option.label}}</legend>

    <div class="table-responsive">
        <table class="table table-condensed">
            <colgroup>
                <col width=""/>
                <col width="15%"/>
                <col width="15%"/>
                <col width="15%"/>
                <col width="15%"/>
            </colgroup>
            <thead>
                <tr>
                    <th>Option Label</th>
                    <th>Type</th>
                    <th>Is Required</th>
                    <th>Controls Inventory</th>
                    <th>Sort</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="form-group">
                        <input class="form-control"
                            type="text"
                            ng-model="option.label"
                            ng-blur="modifyData()" />
                    </td>
                    <td class="form-group">
                        <select class="form-control" ng-blur="modifyData()"
                            ng-change="cleanOption(option.label)"
                            ng-init="option.type = option.type || types[0]"
                            data-ng-model="option.type"
                            data-ng-options="o as o for o in types">
                        </select>
                    </td>
                    <td class="form-group">
                        <select class="form-control" ng-blur="modifyData()"
                            ng-init="option.required = option.required || false"
                            data-ng-model="option.required"
                            data-ng-options="o as o for o in [true, false]">
                        </select>
                    </td>
                    <td class="form-group" ng-if="item.isManagingStock">
                        <select class="form-control" ng-blur="modifyData()"
                            ng-init="option.controls_inventory = option.controls_inventory || false"
                            data-ng-model="option.controls_inventory"
                            data-ng-options="o as o for o in [true, false]">
                        </select>
                    </td>
                    <td class="form-group">
                        <input class="form-control"
                            type="text"
                            ng-model="option.order"
                            ng-blur="modifyData()" />
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div ng-if="option.type === 'field'"
        class="table-responsive">
        <table class="table table-condensed m-b-0">
            <tbody>
                <tr>
                    <td class="form-group">
                        <label>Price</label>
                        <input class="form-control" type="text" ng-model="option.price" ng-blur="modifyData()" />
                    </td>

                    <td class="form-group">
                        <label>SKU</label>
                        <input class="form-control" type="text" ng-model="option.sku" ng-blur="modifyData()" />
                    </td>

                </tr>
            </tbody>
        </table>
    </div>

    <div ng-if="['select', 'multi_select', 'radio', 'checkbox'].indexOf(option.type) !== -1"
        class="table-responsive">
        <table class="table table-condensed table-form m-b-0">
            <colgroup>
                <col width=""/>
                <col width="15%"/>
                <col width="15%"/>
                <col width="15%"/>
                <col width="15%"/>
            </colgroup>
            <thead>
                <tr>
                    <th>Selection Label</th>
                    <th>Price</th>
                    <th>Sku</th>
                    <th>Sort</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="(key, row) in option.options | getOrdered">
                    <td>
                        <input class="form-control"
                            type="text"
                            ng-model="row.label"
                            ng-blur="modifyData()" />
                    </td>
                    <td>
                        <input class="form-control"
                            type="text"
                            ng-model="row.price"
                            ng-blur="modifyData()" />
                    </td>
                    <td>
                        <input class="form-control"
                            type="text"
                            ng-model="row.sku"
                            ng-blur="modifyData()" />
                    </td>
                    <td>
                        <input class="form-control"
                            type="text"
                            ng-model="row.order"
                            ng-blur="modifyData()" />
                    </td>
                    <td class="text-right">
                        <button class="btn btn-block btn-warning"
                            type="button"
                            ng-click="removeRow(option.label, row.label)">
                            <i class="fa fa-remove"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="99">
                        <button class="btn btn-default btn-sm"
                            type="button"
                            ng-click="addRow(option.label)">
                            <i class="fa fa-plus"></i> Add selection
                        </button>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>

</div>
